{"ast":null,"code":"var base64url = require('../help/base64url');\n\nvar errors = require('../errors');\n\nmodule.exports = function (token) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$complete = _ref.complete,\n      complete = _ref$complete === void 0 ? false : _ref$complete;\n\n  if (typeof token !== 'string' || !token) {\n    throw new TypeError('JWT must be a string');\n  }\n\n  var _token$split = token.split('.'),\n      header = _token$split[0],\n      payload = _token$split[1],\n      signature = _token$split[2],\n      length = _token$split.length;\n\n  if (length === 5) {\n    throw new TypeError('encrypted JWTs cannot be decoded');\n  }\n\n  if (length !== 3) {\n    throw new errors.JWTMalformed('JWTs must have three components');\n  }\n\n  try {\n    var result = {\n      header: base64url.JSON.decode(header),\n      payload: base64url.JSON.decode(payload),\n      signature: signature\n    };\n    return complete ? result : result.payload;\n  } catch (err) {\n    throw new errors.JWTMalformed('JWT is malformed');\n  }\n};","map":null,"metadata":{},"sourceType":"script"}