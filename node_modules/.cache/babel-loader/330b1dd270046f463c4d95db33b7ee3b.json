{"ast":null,"code":"var punycode = require('punycode');\n\nvar entities = require('./entities.json');\n\nmodule.exports = decode;\n\nfunction decode(str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a String');\n  }\n\n  return str.replace(/&(#?[^;\\W]+;?)/g, function (_, match) {\n    var m;\n\n    if (m = /^#(\\d+);?$/.exec(match)) {\n      return punycode.ucs2.encode([parseInt(m[1], 10)]);\n    } else if (m = /^#[Xx]([A-Fa-f0-9]+);?/.exec(match)) {\n      return punycode.ucs2.encode([parseInt(m[1], 16)]);\n    } else {\n      // named entity\n      var hasSemi = /;$/.test(match);\n      var withoutSemi = hasSemi ? match.replace(/;$/, '') : match;\n      var target = entities[withoutSemi] || hasSemi && entities[match];\n\n      if (typeof target === 'number') {\n        return punycode.ucs2.encode([target]);\n      } else if (typeof target === 'string') {\n        return target;\n      } else {\n        return '&' + match;\n      }\n    }\n  });\n}","map":null,"metadata":{},"sourceType":"script"}