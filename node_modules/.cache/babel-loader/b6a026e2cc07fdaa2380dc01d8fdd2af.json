{"ast":null,"code":"var errors = require('../errors');\n\nvar Key = require('../jwk/key/base');\n\nvar importKey = require('../jwk/import');\n\nvar _require = require('../jwks/keystore'),\n    KeyStore = _require.KeyStore;\n\nmodule.exports = function (input) {\n  var keyStoreAllowed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (input instanceof Key) {\n    return input;\n  }\n\n  if (input instanceof KeyStore) {\n    if (!keyStoreAllowed) {\n      throw new TypeError('key argument for this operation must not be a JWKS.KeyStore instance');\n    }\n\n    return input;\n  }\n\n  try {\n    return importKey(input);\n  } catch (err) {\n    if (err instanceof errors.JOSEError && !(err instanceof errors.JWKImportFailed)) {\n      throw err;\n    }\n\n    var msg;\n\n    if (keyStoreAllowed) {\n      msg = 'key must be an instance of a key instantiated by JWK.asKey, a valid JWK.asKey input, or a JWKS.KeyStore instance';\n    } else {\n      msg = 'key must be an instance of a key instantiated by JWK.asKey, or a valid JWK.asKey input';\n    }\n\n    throw new TypeError(msg);\n  }\n};","map":null,"metadata":{},"sourceType":"script"}