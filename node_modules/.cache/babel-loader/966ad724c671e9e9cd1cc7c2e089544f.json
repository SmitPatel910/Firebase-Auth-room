{"ast":null,"code":"\"use strict\";\n\nfunction noop() {}\n\nfunction once(emitter, name) {\n  var o = once.spread(emitter, name);\n  var r = o.then(function (args) {\n    return args[0];\n  });\n  r.cancel = o.cancel;\n  return r;\n}\n\n(function (once) {\n  function spread(emitter, name) {\n    var c = null;\n    var p = new Promise(function (resolve, reject) {\n      function cancel() {\n        emitter.removeListener(name, onEvent);\n        emitter.removeListener('error', onError);\n        p.cancel = noop;\n      }\n\n      function onEvent() {\n        cancel();\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        resolve(args);\n      }\n\n      function onError(err) {\n        cancel();\n        reject(err);\n      }\n\n      c = cancel;\n      emitter.on(name, onEvent);\n      emitter.on('error', onError);\n    });\n\n    if (!c) {\n      throw new TypeError('Could not get `cancel()` function');\n    }\n\n    p.cancel = c;\n    return p;\n  }\n\n  once.spread = spread;\n})(once || (once = {}));\n\nmodule.exports = once;","map":null,"metadata":{},"sourceType":"script"}