{"ast":null,"code":"'use strict';\n\nmodule.exports = function stubs(obj, method, cfg, stub) {\n  if (!obj || !method || !obj[method]) throw new Error('You must provide an object and a key for an existing method');\n\n  if (!stub) {\n    stub = cfg;\n    cfg = {};\n  }\n\n  stub = stub || function () {};\n\n  cfg.callthrough = cfg.callthrough || false;\n  cfg.calls = cfg.calls || 0;\n  var norevert = cfg.calls === 0;\n  var cached = obj[method].bind(obj);\n\n  obj[method] = function () {\n    var args = [].slice.call(arguments);\n    var returnVal;\n    if (cfg.callthrough) returnVal = cached.apply(obj, args);\n    returnVal = stub.apply(obj, args) || returnVal;\n    if (!norevert && --cfg.calls === 0) obj[method] = cached;\n    return returnVal;\n  };\n};","map":null,"metadata":{},"sourceType":"script"}