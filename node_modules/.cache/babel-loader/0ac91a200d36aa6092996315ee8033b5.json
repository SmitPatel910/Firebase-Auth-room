{"ast":null,"code":"var punycode = require('punycode');\n\nvar revEntities = require('./reversed.json');\n\nmodule.exports = encode;\n\nfunction encode(str, opts) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a String');\n  }\n\n  if (!opts) opts = {};\n  var numeric = true;\n  if (opts.named) numeric = false;\n  if (opts.numeric !== undefined) numeric = opts.numeric;\n  var special = opts.special || {\n    '\"': true,\n    \"'\": true,\n    '<': true,\n    '>': true,\n    '&': true\n  };\n  var codePoints = punycode.ucs2.decode(str);\n  var chars = [];\n\n  for (var i = 0; i < codePoints.length; i++) {\n    var cc = codePoints[i];\n    var c = punycode.ucs2.encode([cc]);\n    var e = revEntities[cc];\n\n    if (e && (cc >= 127 || special[c]) && !numeric) {\n      chars.push('&' + (/;$/.test(e) ? e : e + ';'));\n    } else if (cc < 32 || cc >= 127 || special[c]) {\n      chars.push('&#' + cc + ';');\n    } else {\n      chars.push(c);\n    }\n  }\n\n  return chars.join('');\n}","map":null,"metadata":{},"sourceType":"script"}