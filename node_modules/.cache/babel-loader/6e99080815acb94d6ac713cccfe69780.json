{"ast":null,"code":"var _regeneratorRuntime = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/asyncToGenerator\");\n\nvar _slicedToArray = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/slicedToArray\");\n\nvar _defineProperty = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/defineProperty\");\n\nvar _toConsumableArray = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/toConsumableArray\");\n\nvar _objectSpread = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/objectSpread\");\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar _require = require('assert'),\n    assert = _require.strict;\n\nvar _require2 = require('util'),\n    inspect = _require2.inspect;\n\nvar _require3 = require('os'),\n    EOL = _require3.EOL;\n\nvar _require4 = require('../../help/runtime_support'),\n    keyObjectSupported = _require4.keyObjectSupported;\n\nvar _require5 = require('../../help/key_object'),\n    createPublicKey = _require5.createPublicKey;\n\nvar _require6 = require('../../help/key_utils'),\n    keyObjectToJWK = _require6.keyObjectToJWK;\n\nvar _require7 = require('../../help/consts'),\n    THUMBPRINT_MATERIAL = _require7.THUMBPRINT_MATERIAL,\n    PUBLIC_MEMBERS = _require7.PUBLIC_MEMBERS,\n    PRIVATE_MEMBERS = _require7.PRIVATE_MEMBERS,\n    JWK_MEMBERS = _require7.JWK_MEMBERS,\n    KEYOBJECT = _require7.KEYOBJECT,\n    USES_MAPPING = _require7.USES_MAPPING,\n    OPS = _require7.OPS,\n    USES = _require7.USES;\n\nvar isObject = require('../../help/is_object');\n\nvar thumbprint = require('../thumbprint');\n\nvar errors = require('../../errors');\n\nvar privateApi = Symbol('privateApi');\n\nvar _require8 = require('../../registry'),\n    JWK = _require8.JWK;\n\nvar Key = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function Key(keyObject) {\n    var _objectSpread2;\n\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        alg = _ref.alg,\n        use = _ref.use,\n        kid = _ref.kid,\n        ops = _ref.key_ops,\n        x5c = _ref.x5c,\n        x5t = _ref.x5t,\n        x5t256 = _ref['x5t#S256'];\n\n    _classCallCheck(this, Key);\n\n    if (use !== undefined) {\n      if (typeof use !== 'string' || !USES.has(use)) {\n        throw new TypeError('`use` must be either \"sig\" or \"enc\" string when provided');\n      }\n    }\n\n    if (alg !== undefined) {\n      if (typeof alg !== 'string' || !alg) {\n        throw new TypeError('`alg` must be a non-empty string when provided');\n      }\n    }\n\n    if (kid !== undefined) {\n      if (typeof kid !== 'string' || !kid) {\n        throw new TypeError('`kid` must be a non-empty string when provided');\n      }\n    }\n\n    if (ops !== undefined) {\n      if (!Array.isArray(ops) || !ops.length || ops.some(function (o) {\n        return typeof o !== 'string';\n      })) {\n        throw new TypeError('`key_ops` must be a non-empty array of strings when provided');\n      }\n\n      ops = Array.from(new Set(ops)).filter(function (x) {\n        return OPS.has(x);\n      });\n    }\n\n    if (ops && use) {\n      if (use === 'enc' && ops.some(function (x) {\n        return USES_MAPPING.sig.has(x);\n      }) || use === 'sig' && ops.some(function (x) {\n        return USES_MAPPING.enc.has(x);\n      })) {\n        throw new errors.JWKInvalid('inconsistent JWK \"use\" and \"key_ops\"');\n      }\n    }\n\n    if (keyObjectSupported && x5c !== undefined) {\n      if (!Array.isArray(x5c) || !x5c.length || x5c.some(function (c) {\n        return typeof c !== 'string';\n      })) {\n        throw new TypeError('`x5c` must be an array of one or more PKIX certificates when provided');\n      }\n\n      x5c.forEach(function (cert, i) {\n        var publicKey;\n\n        try {\n          publicKey = createPublicKey({\n            key: \"-----BEGIN CERTIFICATE-----\".concat(EOL).concat((cert.match(/.{1,64}/g) || []).join(EOL)).concat(EOL, \"-----END CERTIFICATE-----\"),\n            format: 'pem'\n          });\n        } catch (err) {\n          throw new errors.JWKInvalid(\"`x5c` member at index \".concat(i, \" is not a valid base64-encoded DER PKIX certificate\"));\n        }\n\n        if (i === 0) {\n          try {\n            assert.deepEqual(publicKey.export({\n              type: 'spki',\n              format: 'der'\n            }), (keyObject.type === 'public' ? keyObject : createPublicKey(keyObject)).export({\n              type: 'spki',\n              format: 'der'\n            }));\n          } catch (err) {\n            throw new errors.JWKInvalid('The key in the first `x5c` certificate MUST match the public key represented by the JWK');\n          }\n        }\n      });\n    }\n\n    Object.defineProperties(this, _objectSpread((_objectSpread2 = {}, _defineProperty(_objectSpread2, KEYOBJECT, {\n      value: isObject(keyObject) ? undefined : keyObject\n    }), _defineProperty(_objectSpread2, \"keyObject\", {\n      get: function get() {\n        if (!keyObjectSupported) {\n          throw new errors.JOSENotSupported('KeyObject class is not supported in your Node.js runtime version');\n        }\n\n        return this[KEYOBJECT];\n      }\n    }), _defineProperty(_objectSpread2, \"type\", {\n      value: keyObject.type\n    }), _defineProperty(_objectSpread2, \"private\", {\n      value: keyObject.type === 'private'\n    }), _defineProperty(_objectSpread2, \"public\", {\n      value: keyObject.type === 'public'\n    }), _defineProperty(_objectSpread2, \"secret\", {\n      value: keyObject.type === 'secret'\n    }), _defineProperty(_objectSpread2, \"alg\", {\n      value: alg,\n      enumerable: alg !== undefined\n    }), _defineProperty(_objectSpread2, \"use\", {\n      value: use,\n      enumerable: use !== undefined\n    }), _defineProperty(_objectSpread2, \"x5c\", _objectSpread({\n      enumerable: x5c !== undefined\n    }, x5c ? {\n      get: function get() {\n        return _toConsumableArray(x5c);\n      }\n    } : {\n      value: undefined\n    })), _defineProperty(_objectSpread2, \"key_ops\", _objectSpread({\n      enumerable: ops !== undefined\n    }, ops ? {\n      get: function get() {\n        return _toConsumableArray(ops);\n      }\n    } : {\n      value: undefined\n    })), _defineProperty(_objectSpread2, \"kid\", _objectSpread({\n      enumerable: true\n    }, kid ? {\n      value: kid\n    } : {\n      get: function get() {\n        Object.defineProperty(this, 'kid', {\n          value: this.thumbprint,\n          configurable: false\n        });\n        return this.kid;\n      },\n      configurable: true\n    })), _objectSpread2), x5c ? {\n      x5t: _objectSpread({\n        enumerable: true\n      }, x5t ? {\n        value: x5t\n      } : {\n        get: function get() {\n          Object.defineProperty(this, 'x5t', {\n            value: thumbprint.x5t(this.x5c[0]),\n            configurable: false\n          });\n          return this.x5t;\n        },\n        configurable: true\n      })\n    } : undefined, x5c ? {\n      'x5t#S256': _objectSpread({\n        enumerable: true\n      }, x5t256 ? {\n        value: x5t256\n      } : {\n        get: function get() {\n          Object.defineProperty(this, 'x5t#S256', {\n            value: thumbprint['x5t#S256'](this.x5c[0]),\n            configurable: false\n          });\n          return this['x5t#S256'];\n        },\n        configurable: true\n      })\n    } : undefined, {\n      thumbprint: {\n        get: function get() {\n          Object.defineProperty(this, 'thumbprint', {\n            value: thumbprint.kid(this[THUMBPRINT_MATERIAL]()),\n            configurable: false\n          });\n          return this.thumbprint;\n        },\n        configurable: true\n      }\n    }));\n  }\n\n  _createClass(Key, [{\n    key: \"toPEM\",\n    value: function toPEM() {\n      var priv = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var encoding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.secret) {\n        throw new TypeError('symmetric keys cannot be exported as PEM');\n      }\n\n      if (priv && this.public === true) {\n        throw new TypeError('public key cannot be exported as private');\n      }\n\n      var _encoding$type = encoding.type,\n          type = _encoding$type === void 0 ? priv ? 'pkcs8' : 'spki' : _encoding$type,\n          cipher = encoding.cipher,\n          passphrase = encoding.passphrase;\n      var keyObject = this[KEYOBJECT];\n\n      if (!priv) {\n        if (this.private) {\n          keyObject = createPublicKey(keyObject);\n        }\n\n        if (cipher || passphrase) {\n          throw new TypeError('cipher and passphrase can only be applied when exporting private keys');\n        }\n      }\n\n      if (priv) {\n        return keyObject.export({\n          format: 'pem',\n          type: type,\n          cipher: cipher,\n          passphrase: passphrase\n        });\n      }\n\n      return keyObject.export({\n        format: 'pem',\n        type: type\n      });\n    }\n  }, {\n    key: \"toJWK\",\n    value: function toJWK() {\n      var _this = this;\n\n      var priv = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (priv && this.public === true) {\n        throw new TypeError('public key cannot be exported as private');\n      }\n\n      var components = _toConsumableArray(this.constructor[priv ? PRIVATE_MEMBERS : PUBLIC_MEMBERS]).map(function (k) {\n        return [k, _this[k]];\n      });\n\n      var result = {};\n      Object.keys(components).forEach(function (key) {\n        var _components$key = _slicedToArray(components[key], 2),\n            k = _components$key[0],\n            v = _components$key[1];\n\n        result[k] = v;\n      });\n      result.kty = this.kty;\n      result.kid = this.kid;\n\n      if (this.alg) {\n        result.alg = this.alg;\n      }\n\n      if (this.key_ops && this.key_ops.length) {\n        result.key_ops = this.key_ops;\n      }\n\n      if (this.use) {\n        result.use = this.use;\n      }\n\n      if (this.x5c) {\n        result.x5c = this.x5c;\n      }\n\n      if (this.x5t) {\n        result.x5t = this.x5t;\n      }\n\n      if (this['x5t#S256']) {\n        result['x5t#S256'] = this['x5t#S256'];\n      }\n\n      return result;\n    }\n  }, {\n    key: JWK_MEMBERS,\n    value: function value() {\n      var _this2 = this;\n\n      var props = this[KEYOBJECT].type === 'private' ? this.constructor[PRIVATE_MEMBERS] : this.constructor[PUBLIC_MEMBERS];\n      Object.defineProperties(this, _toConsumableArray(props).reduce(function (acc, component) {\n        acc[component] = {\n          get: function get() {\n            var _this3 = this;\n\n            var jwk = keyObjectToJWK(this[KEYOBJECT]);\n            Object.defineProperties(this, Object.entries(jwk).filter(function (_ref2) {\n              var _ref3 = _slicedToArray(_ref2, 1),\n                  key = _ref3[0];\n\n              return props.has(key);\n            }).reduce(function (acc, _ref4) {\n              var _ref5 = _slicedToArray(_ref4, 2),\n                  key = _ref5[0],\n                  value = _ref5[1];\n\n              acc[key] = {\n                value: value,\n                enumerable: _this3.constructor[PUBLIC_MEMBERS].has(key),\n                configurable: false\n              };\n              return acc;\n            }, {}));\n            return this[component];\n          },\n          enumerable: _this2.constructor[PUBLIC_MEMBERS].has(component),\n          configurable: true\n        };\n        return acc;\n      }, {}));\n    }\n    /* c8 ignore next 8 */\n\n  }, {\n    key: inspect.custom,\n    value: function value() {\n      return \"\".concat(this.constructor.name, \" \").concat(inspect(this.toJWK(false), {\n        depth: Infinity,\n        colors: process.stdout.isTTY,\n        compact: false,\n        sorted: true\n      }));\n    }\n    /* c8 ignore next 3 */\n\n  }, {\n    key: THUMBPRINT_MATERIAL,\n    value: function value() {\n      throw new Error(\"\\\"[THUMBPRINT_MATERIAL]()\\\" is not implemented on \".concat(this.constructor.name));\n    }\n  }, {\n    key: \"algorithms\",\n    value: function algorithms(operation,\n    /* the rest is private API */\n    int, opts) {\n      var _this4 = this;\n\n      var _ref6 = int === privateApi ? opts : {},\n          _ref6$use = _ref6.use,\n          use = _ref6$use === void 0 ? this.use : _ref6$use,\n          _ref6$alg = _ref6.alg,\n          alg = _ref6$alg === void 0 ? this.alg : _ref6$alg,\n          _ref6$key_ops = _ref6.key_ops,\n          ops = _ref6$key_ops === void 0 ? this.key_ops : _ref6$key_ops;\n\n      if (alg) {\n        return new Set(this.algorithms(operation, privateApi, {\n          alg: null,\n          use: use,\n          key_ops: ops\n        }).has(alg) ? [alg] : undefined);\n      }\n\n      if (typeof operation === 'symbol') {\n        try {\n          return this[operation]();\n        } catch (err) {\n          return new Set();\n        }\n      }\n\n      if (operation && ops && !ops.includes(operation)) {\n        return new Set();\n      }\n\n      switch (operation) {\n        case 'decrypt':\n        case 'deriveKey':\n        case 'encrypt':\n        case 'sign':\n        case 'unwrapKey':\n        case 'verify':\n        case 'wrapKey':\n          return new Set(Object.entries(JWK[this.kty][operation]).map(function (_ref7) {\n            var _ref8 = _slicedToArray(_ref7, 2),\n                alg = _ref8[0],\n                fn = _ref8[1];\n\n            return fn(_this4) ? alg : undefined;\n          }).filter(Boolean));\n\n        case undefined:\n          return new Set([].concat(_toConsumableArray(this.algorithms('sign')), _toConsumableArray(this.algorithms('verify')), _toConsumableArray(this.algorithms('decrypt')), _toConsumableArray(this.algorithms('encrypt')), _toConsumableArray(this.algorithms('unwrapKey')), _toConsumableArray(this.algorithms('wrapKey')), _toConsumableArray(this.algorithms('deriveKey'))));\n\n        default:\n          throw new TypeError('invalid key operation');\n      }\n    }\n    /* c8 ignore next 3 */\n\n  }], [{\n    key: \"generate\",\n    value: function () {\n      var _generate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                throw new Error(\"\\\"static async generate()\\\" is not implemented on \".concat(this.name));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function generate() {\n        return _generate.apply(this, arguments);\n      }\n\n      return generate;\n    }()\n    /* c8 ignore next 3 */\n\n  }, {\n    key: \"generateSync\",\n    value: function generateSync() {\n      throw new Error(\"\\\"static generateSync()\\\" is not implemented on \".concat(this.name));\n    }\n    /* c8 ignore next 3 */\n\n  }, {\n    key: PUBLIC_MEMBERS,\n    get: function get() {\n      throw new Error(\"\\\"static get [PUBLIC_MEMBERS]()\\\" is not implemented on \".concat(this.name));\n    }\n    /* c8 ignore next 3 */\n\n  }, {\n    key: PRIVATE_MEMBERS,\n    get: function get() {\n      throw new Error(\"\\\"static get [PRIVATE_MEMBERS]()\\\" is not implemented on \".concat(this.name));\n    }\n  }]);\n\n  return Key;\n}();\n\nmodule.exports = Key;","map":null,"metadata":{},"sourceType":"script"}