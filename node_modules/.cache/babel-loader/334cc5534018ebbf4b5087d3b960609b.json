{"ast":null,"code":"\"use strict\"; // Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\Users\\\\Smit\\\\OneDrive\\\\Desktop\\\\RTC-React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultTransporter = void 0;\n\nvar gaxios_1 = require(\"gaxios\");\n\nvar options_1 = require(\"./options\"); // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\nvar pkg = require('../../package.json');\n\nvar PRODUCT_NAME = 'google-api-nodejs-client';\n\nvar DefaultTransporter = /*#__PURE__*/function () {\n  function DefaultTransporter() {\n    _classCallCheck(this, DefaultTransporter);\n  }\n\n  _createClass(DefaultTransporter, [{\n    key: \"configure\",\n\n    /**\n     * Configures request options before making a request.\n     * @param opts GaxiosOptions options.\n     * @return Configured options.\n     */\n    value: function configure() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      opts.headers = opts.headers || {};\n\n      if (typeof window === 'undefined') {\n        // set transporter user agent if not in browser\n        var uaValue = opts.headers['User-Agent'];\n\n        if (!uaValue) {\n          opts.headers['User-Agent'] = DefaultTransporter.USER_AGENT;\n        } else if (!uaValue.includes(\"\".concat(PRODUCT_NAME, \"/\"))) {\n          opts.headers['User-Agent'] = \"\".concat(uaValue, \" \").concat(DefaultTransporter.USER_AGENT);\n        } // track google-auth-library-nodejs version:\n\n\n        var authVersion = \"auth/\".concat(pkg.version);\n\n        if (opts.headers['x-goog-api-client'] && !opts.headers['x-goog-api-client'].includes(authVersion)) {\n          opts.headers['x-goog-api-client'] = \"\".concat(opts.headers['x-goog-api-client'], \" \").concat(authVersion);\n        } else if (!opts.headers['x-goog-api-client']) {\n          var nodeVersion = process.version.replace(/^v/, '');\n          opts.headers['x-goog-api-client'] = \"gl-node/\".concat(nodeVersion, \" \").concat(authVersion);\n        }\n      }\n\n      return opts;\n    }\n  }, {\n    key: \"request\",\n    value: function request(opts, callback) {\n      var _this = this;\n\n      // ensure the user isn't passing in request-style options\n      opts = this.configure(opts);\n\n      try {\n        options_1.validate(opts);\n      } catch (e) {\n        if (callback) {\n          return callback(e);\n        } else {\n          throw e;\n        }\n      }\n\n      if (callback) {\n        gaxios_1.request(opts).then(function (r) {\n          callback(null, r);\n        }, function (e) {\n          callback(_this.processError(e));\n        });\n      } else {\n        return gaxios_1.request(opts).catch(function (e) {\n          throw _this.processError(e);\n        });\n      }\n    }\n    /**\n     * Changes the error to include details from the body.\n     */\n\n  }, {\n    key: \"processError\",\n    value: function processError(e) {\n      var res = e.response;\n      var err = e;\n      var body = res ? res.data : null;\n\n      if (res && body && body.error && res.status !== 200) {\n        if (typeof body.error === 'string') {\n          err.message = body.error;\n          err.code = res.status.toString();\n        } else if (Array.isArray(body.error.errors)) {\n          err.message = body.error.errors.map(function (err2) {\n            return err2.message;\n          }).join('\\n');\n          err.code = body.error.code;\n          err.errors = body.error.errors;\n        } else {\n          err.message = body.error.message;\n          err.code = body.error.code || res.status;\n        }\n      } else if (res && res.status >= 400) {\n        // Consider all 4xx and 5xx responses errors.\n        err.message = body;\n        err.code = res.status.toString();\n      }\n\n      return err;\n    }\n  }]);\n\n  return DefaultTransporter;\n}();\n\nexports.DefaultTransporter = DefaultTransporter;\n/**\n * Default user agent.\n */\n\nDefaultTransporter.USER_AGENT = \"\".concat(PRODUCT_NAME, \"/\").concat(pkg.version);","map":null,"metadata":{},"sourceType":"script"}